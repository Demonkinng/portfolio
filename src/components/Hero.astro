---
import Image from "astro/components/Image.astro";
import heroImage from "../assets/stick.png";
import Cv from "../components/icons/Cv.astro";
import SocialPill from "../components/SocialPill.astro";

const roles = [
  "software engineer",
  "full stack developer",
  "design system",
  "cloud enthusiast",
  "crafting code",
];
---

<div class="grid gap-12 lg:grid-cols-2 lg:gap-20 lg:items-center lg:min-h-[70vh]">
  <!-- Left column - Description -->
  <div class="space-y-8 sm:space-y-10">
    <div class="space-y-3">
      <p class="font-mono text-sm uppercase tracking-[0.25em] sm:tracking-[0.35em] text-cyan-500">
        Open to opportunities
      </p>

      <h1 class="text-4xl font-bold tracking-tight sm:text-5xl lg:text-5xl xl:text-6xl text-balance">
        ANGEL CHUNCHO
        <br />
        <!-- Dynamic words -->
        <span
          id="typing-text"
          class="bg-linear-to-l from-cyan-500/50 to-cyan-500 text-transparent bg-clip-text typing-cursor"
          data-roles={JSON.stringify(roles)}>&nbsp;</span
        >
      </h1>
    </div>

    <p class="max-w-lg text-xl sm:text-2xl leading-relaxed text-gray-500">
      Building accessible, performant web applications with modern technologies.
    </p>

    <!-- Call to action -->
    <div class="flex flex-col sm:flex-row gap-4">
      <SocialPill href="#projects" target="_self"> View Projects </SocialPill>
      <SocialPill href="https://drive.google.com/file/d/1WC8rHfKKBx8JTDvrcn39hsuoC4x3EVzL/view?usp=sharing">
        <Cv />
        My CV
      </SocialPill>
    </div>
  </div>

  <!-- Right column - Image Stick -->
  <div class="flex justify-end">
    <Image class="w-3/4 sm:w-2/3 lg:w-[55%]" src={heroImage} alt="Hero" />
  </div>
</div>

<!-- Scroll indicator -->
<div class="absolute bottom-4 left-1/2 -translate-x-1/2">
  <!-- <div class="mouse-scroll relative w-8 h-16 border-2 border-solid border-gray-500 rounded-3xl">
      <div class="absolute size-1.5 rounded-[50%] bg-gray-500 left-1/2 -translate-x-1/2 animate-[scroll_2.5s_infinite] top-[80%]">
      </div>
    </div> -->
  <div class="arrow-scroll relative h-16">
    <div class="arrow absolute inline-block border-r-[5px] border-b-[5px] border-solid border-gray-500 p-3 top-0 left-1/2 -translate-x-1/2 rotate-45"></div>
    <div class="arrow absolute inline-block border-r-[5px] border-b-[5px] border-solid border-gray-500 p-3 top-0 left-1/2 -translate-x-1/2 rotate-45"></div>
    <div class="arrow absolute inline-block border-r-[5px] border-b-[5px] border-solid border-gray-500 p-3 top-0 left-1/2 -translate-x-1/2 rotate-45"></div>
  </div>

  <script>
    const el = document.getElementById("typing-text");
    if (el) {
      const roles: string[] = JSON.parse(el.dataset.roles || "[]");
      let currentRole = 0;
      let displayText = "";
      let isDeleting = false;

      function updateText(text: string) {
        el!.textContent = text || "\u00A0";
      }

      function tick() {
        const targetText = roles[currentRole];

        if (!isDeleting) {
          if (displayText.length < targetText.length) {
            displayText = targetText.slice(0, displayText.length + 1);
            updateText(displayText);
            setTimeout(tick, 100);
          } else {
            // Pause before deleting
            setTimeout(() => {
              isDeleting = true;
              tick();
            }, 2000);
          }
        } else {
          if (displayText.length > 0) {
            displayText = displayText.slice(0, -1);
            updateText(displayText);
            setTimeout(tick, 50);
          } else {
            isDeleting = false;
            currentRole = (currentRole + 1) % roles.length;
            setTimeout(tick, 100);
          }
        }
      }

      updateText("");
      tick();
    }
  </script>
</div>
